# 手冲咖啡冲泡助手 - 开发要点与验收报告

| 文档版本 | 创建日期 | 最后更新 | 状态 |
| :--- | :--- | :--- | :--- |
| v1.0 | 2026-01-16 | 2026-01-16 | 开发中 |

---

## 📋 目录

- [P0 核心功能（MVP 必需）](#p0-核心功能mvp-必需)
- [P1 重要功能（MVP 后优先）](#p1-重要功能mvp-后优先)
- [P2 增强功能（后续迭代）](#p2-增强功能后续迭代)
- [验收报告模板](#验收报告模板)

---

## P0 核心功能（MVP 必需）

### 🎯 开发目标
完成最小可用产品（MVP），确保用户能够：
1. 选择预设冲煮方案
2. 使用精准计时器进行冲煮
3. 记录风味品鉴
4. 查看历史记录

**预计工作量**: 3-4 周
**优先级**: 最高
**状态**: 🔴 未开始

---

### 1. 基础设施搭建

#### 1.1 项目初始化 ✅ 已完成
- [x] Vue 3.5 + Vite 7.3 项目脚手架
- [x] Tailwind CSS 4.1 配置
- [x] Vue Router 4.6 安装
- [x] Pinia 3.0 + 持久化插件安装
- [x] 目录结构规划

**验收标准**:
- [x] `npm run dev` 正常启动
- [x] `npm run build` 成功构建
- [x] Tailwind CSS 样式正常工作
- [x] 路由跳转正常
- [x] Pinia store 可正常使用

**时间**: ✅ 已完成

---

#### 1.2 基础 UI 组件库

**任务清单**:
- [ ] `Button.vue` - 按钮组件（主要、次要、轮廓、危险）
- [ ] `Card.vue` - 卡片容器
- [ ] `Modal.vue` - 模态框（确认、警告）
- [ ] `Input.vue` - 输入框（文本、数字）
- [ ] `StarRating.vue` - 星级评分组件（1-5星）
- [ ] `TabBar.vue` - 底部导航栏
- [ ] `Header.vue` - 顶部标题栏

**验收标准**:
- [ ] 所有组件支持暗色主题（可选）
- [ ] 按钮最小触摸区域 44x44px
- [ ] 所有组件响应式适配（手机、平板）
- [ ] 符合 WCAG AA 色彩对比度标准
- [ ] 组件使用 Composition API `<script setup>`

**时间**: 3 天

**文件位置**:
```
src/components/ui/
├── Button.vue
├── Card.vue
├── Modal.vue
├── Input.vue
├── StarRating.vue
└── layout/
    ├── Header.vue
    └── TabBar.vue
```

---

### 2. 冲煮方案库（Recipe Library）

#### 2.1 数据准备

**任务清单**:
- [ ] 创建方案数据结构（见 PRD 2.1 数据模型）
- [ ] 准备至少 3 个预设方案：
  - [ ] V60 标准四六法
  - [ ] Chemex 经典冲煮
  - [ ] 爱乐压快速萃取
- [ ] 创建 `recipeStore.js`

**验收标准**:
- [ ] 每个方案包含完整参数（粉量、水量、水温、研磨度）
- [ ] 分段注水步骤定义清晰（步骤名、水量、时长、说明）
- [ ] 方案存储在 localStorage（持久化）
- [ ] 可通过 ID 查询方案

**时间**: 2 天

**文件位置**:
```
src/stores/recipeStore.js
src/utils/constants.js  # 预设方案数据
```

**数据示例**:
```javascript
{
  recipeId: "v60-standard",
  name: "V60 标准四六法",
  device: "V60",
  coffeeWeight: 20,
  totalWater: 300,
  ratio: "1:15",
  temperature: 92,
  grindSize: 800,
  grindSizeDesc: "中细研磨",
  steps: [
    {
      stepId: 0,
      name: "闷蒸",
      waterAmount: 60,
      duration: 30,
      instruction: "轻柔注水，浸润所有粉层",
      startTime: 0,
      endTime: 30
    },
    // ... 更多步骤
  ],
  tags: ["浅烘焙", "果香调", "四六法"],
  difficulty: "初级",
  isPreset: true,
  createdBy: "system"
}
```

---

#### 2.2 方案列表页面（HomeView）

**任务清单**:
- [ ] 创建 `HomeView.vue`
- [ ] 创建 `RecipeCard.vue` 组件
- [ ] 显示所有预设方案（卡片网格布局）
- [ ] 点击卡片查看方案详情
- [ ] 显示方案关键信息（器具、粉水比、难度、标签）

**验收标准**:
- [ ] 卡片显示方案名称、器具图标、粉水比
- [ ] 卡片支持点击，跳转到方案详情
- [ ] 响应式布局（手机 1 列，平板 2 列）
- [ ] 卡片有 hover 效果（阴影、缩放）
- [ ] 空状态提示（无方案时）

**时间**: 2 天

**文件位置**:
```
src/views/HomeView.vue
src/components/recipes/RecipeCard.vue
```

---

#### 2.3 方案详情页面（RecipeDetail）

**任务清单**:
- [ ] 创建 `RecipeDetail.vue` 组件
- [ ] 显示完整方案参数（粉量、水量、水温、研磨度）
- [ ] 显示分段注水步骤（步骤名、水量、时长、说明）
- [ ] "开始冲煮" 按钮 → 跳转到冲煮配置页
- [ ] 步骤时间轴可视化（可选）

**验收标准**:
- [ ] 所有方案参数正确显示
- [ ] 步骤列表清晰易读（序号、名称、水量、时长）
- [ ] "开始冲煮" 按钮明显且易点击
- [ ] 返回按钮可回到首页
- [ ] 支持左右滑动切换方案（可选）

**时间**: 2 天

**文件位置**:
```
src/components/recipes/RecipeDetail.vue
```

---

### 3. 智能冲煮助手（Brewing Assistant）⭐ 核心

#### 3.1 Pinia 冲煮状态管理（brewingStore）

**任务清单**:
- [ ] 创建 `brewingStore.js`（见 PRD 2.2 技术实现）
- [ ] 实现状态管理：
  - [ ] `activeRecipe` - 当前方案
  - [ ] `isBrewing` - 是否正在冲煮
  - [ ] `isPaused` - 是否暂停
  - [ ] `currentStepIndex` - 当前步骤索引
  - [ ] `currentTime` - 当前步骤用时
  - [ ] `totalElapsedTime` - 总用时
- [ ] 实现 Actions：
  - [ ] `startBrew(recipe)` - 开始冲煮
  - [ ] `tick()` - 计时器 tick（使用 performance.now()）
  - [ ] `pauseBrew()` - 暂停
  - [ ] `resumeBrew()` - 恢复
  - [ ] `completeCurrentStep()` - 完成当前步骤
  - [ ] `finishBrew()` - 结束冲煮
  - [ ] `resetBrew()` - 重置
- [ ] 配置 sessionStorage 持久化（临时存储）

**验收标准**:
- [ ] 计时器精度误差 < 0.1s
- [ ] 暂停/恢复功能正常
- [ ] 步骤自动切换准确
- [ ] 刷新页面后状态恢复（sessionStorage）
- [ ] 关闭页面后状态清除

**时间**: 3 天

**文件位置**:
```
src/stores/brewingStore.js
```

**关键代码片段**:
```javascript
tick() {
  if (!this.isBrewing || this.isPaused) return;

  const elapsed = performance.now() - this.startTime - this.pausedTime;
  this.totalElapsedTime = Math.floor(elapsed / 1000);

  const currentStep = this.currentStep;
  if (currentStep) {
    this.currentTime = this.totalElapsedTime - currentStep.startTime;

    // 检查步骤是否完成
    if (this.currentTime >= currentStep.duration) {
      this.completeCurrentStep();
    }
  }

  requestAnimationFrame(() => this.tick());
}
```

---

#### 3.2 声音/振动提醒

**任务清单**:
- [ ] 准备提示音文件（`step-complete.mp3`）
- [ ] 实现 `playSound()` 方法
- [ ] 实现振动反馈（`navigator.vibrate`）
- [ ] 实现通知提示（Notification API）
- [ ] 步骤完成时触发提醒

**验收标准**:
- [ ] 每个步骤结束时播放提示音
- [ ] 支持振动的设备有振动反馈（200ms-100ms-200ms）
- [ ] 通知权限已授予时显示下一步提示
- [ ] 用户可在设置中关闭提醒（可选）
- [ ] 提示音文件 < 50KB

**时间**: 1 天

**文件位置**:
```
src/assets/sounds/step-complete.mp3
src/stores/brewingStore.js (playSound 方法)
```

---

#### 3.3 冲煮配置页面（BrewingView）

**任务清单**:
- [ ] 创建 `BrewingView.vue`（全屏配置页）
- [ ] 显示方案参数预览
- [ ] 器具准备检查清单（可选）
- [ ] "开始计时" 按钮 → 启动冲煮并返回首页
- [ ] 展示 Bottom Sheet 冲煮面板

**验收标准**:
- [ ] 显示即将使用的方案名称和参数
- [ ] "开始计时" 按钮明显且易点击
- [ ] 点击后正确启动计时器
- [ ] 自动返回首页并展开 Bottom Sheet
- [ ] 可返回修改方案选择

**时间**: 2 天

**文件位置**:
```
src/views/BrewingView.vue
```

---

#### 3.4 Bottom Sheet 冲煮面板 ⭐ 核心

**任务清单**:
- [ ] 创建 `BrewingBottomSheet.vue`（见 PRD 2.2.1）
- [ ] 实现三种状态：
  - [ ] Hidden（隐藏）
  - [ ] Collapsed（收起，80px）
  - [ ] Expanded（展开，90vh）
- [ ] 实现交互方式：
  - [ ] 拖动手势（使用 VueUse `useSwipe`）
  - [ ] 点击切换
  - [ ] 背景遮罩点击收起
- [ ] 收起状态显示：
  - [ ] 步骤名称和进度（1/4）
  - [ ] 紧凑计时器
  - [ ] 暂停/播放按钮
  - [ ] 展开按钮
- [ ] 展开状态显示：
  - [ ] 当前步骤名称（48px 大字）
  - [ ] 圆环计时器
  - [ ] 水量提示和注水说明
  - [ ] 下一步预览
  - [ ] 操作按钮（暂停、跳过、结束）

**验收标准**:
- [ ] 拖动手势流畅，无卡顿
- [ ] 三种状态切换动画自然（300ms ease-out）
- [ ] 收起状态正确显示步骤名、计时、操作按钮
- [ ] 展开状态正确显示完整冲煮界面
- [ ] 背景遮罩在展开时显示，点击收起
- [ ] 多任务：收起时可正常浏览其他页面，冲煮不中断
- [ ] 计时器在所有状态下精准运行
- [ ] 所有触摸区域 ≥ 44x44px
- [ ] 在 iOS Safari 和 Android Chrome 测试通过

**时间**: 4 天

**文件位置**:
```
src/components/brewing/BrewingBottomSheet.vue
```

**设计规范**:
- 收起高度: 80px
- 展开高度: 90vh
- z-index: 遮罩 40, 面板 50
- 圆角: 24px (rounded-t-3xl)
- 过渡时间: 300ms ease-out
- 拖动手柄: 48px × 6px, gray-300

---

#### 3.5 圆环计时器组件（BrewTimer）

**任务清单**:
- [ ] 创建 `BrewTimer.vue`
- [ ] SVG 圆环进度条（strokeDashoffset 动画）
- [ ] 显示当前时间 / 总时间（00:25 / 00:30）
- [ ] 使用 wyxqn 字体（64px）
- [ ] 进度颜色根据状态变化（进行中、即将完成、已完成）

**验收标准**:
- [ ] 圆环进度平滑更新（60fps）
- [ ] 时间格式正确（MM:SS）
- [ ] 字体清晰易读（wyxqn）
- [ ] 进度颜色区分明显
- [ ] 响应式适配（小屏缩小）

**时间**: 2 天

**文件位置**:
```
src/components/brewing/BrewTimer.vue
```

---

### 4. 风味记录与品鉴系统（Tasting Notes）⭐ 核心

#### 4.1 冲煮记录数据管理（tastingStore）

**任务清单**:
- [ ] 创建 `tastingStore.js`
- [ ] 定义 BrewRecord 数据结构（见 PRD 2.3.2）
- [ ] 实现 Actions：
  - [ ] `createRecord(recipeId)` - 创建新记录
  - [ ] `updateRecord(recordId, data)` - 更新记录
  - [ ] `getRecordById(id)` - 查询记录
  - [ ] `getAllRecords()` - 获取所有记录
  - [ ] `deleteRecord(id)` - 删除记录
- [ ] 配置 localStorage 持久化

**验收标准**:
- [ ] 记录正确关联方案 ID
- [ ] 记录包含实际参数和风味数据
- [ ] 数据持久化到 localStorage
- [ ] 刷新页面后数据不丢失
- [ ] 支持导出 JSON（可选）

**时间**: 2 天

**文件位置**:
```
src/stores/tastingStore.js
```

---

#### 4.2 交互式风味轮组件 ⭐ 核心

**任务清单**:
- [ ] 创建 `FlavorWheel.vue`（见 PRD 2.3.1）
- [ ] 准备风味轮数据（9 大类、30+ 细分）
- [ ] 实现三层结构：
  - [ ] 中心圈：主类别（果香、花香等）
  - [ ] 中间圈：细分风味（柑橘、浆果等）
  - [ ] 外圈：具体描述（橙子、柠檬等）
- [ ] 实现交互逻辑：
  - [ ] 点击主类别展开细分
  - [ ] 点击细分展开具体描述
  - [ ] 点击具体描述选中/取消
- [ ] 显示已选标签（可删除）
- [ ] 提供快捷标签（常用风味）

**验收标准**:
- [ ] 风味轮包含至少 9 大类、30 种细分风味
- [ ] SVG 渲染流畅，无卡顿
- [ ] 点击交互准确（容错 10px）
- [ ] 已选标签正确显示和删除
- [ ] 颜色区分清晰（每类不同颜色）
- [ ] 响应式适配（小屏缩小）

**时间**: 5 天

**文件位置**:
```
src/components/tasting/FlavorWheel.vue
src/utils/constants.js  # FLAVOR_WHEEL_DATA
```

**数据结构**:
```javascript
const FLAVOR_WHEEL_DATA = {
  categories: [
    {
      id: 'fruity',
      name: '果香',
      color: '#FF6B6B',
      icon: '🍎',
      subcategories: [
        {
          id: 'citrus',
          name: '柑橘',
          flavors: ['橙子', '柠檬', '柚子']
        }
      ]
    },
    // ... 更多类别
  ]
};
```

---

#### 4.3 维度评分组件（DimensionRating）

**任务清单**:
- [ ] 创建 `DimensionRating.vue`（见 PRD 2.3.2）
- [ ] 实现 5 个维度滑块：
  - [ ] 香气（aroma）
  - [ ] 醇厚度（body）
  - [ ] 酸度（acidity）
  - [ ] 甜度（sweetness）
  - [ ] 余韵（aftertaste）
- [ ] 每个维度 1-5 分（步长 0.5）
- [ ] 实时显示分数
- [ ] 滑块颜色根据维度变化

**验收标准**:
- [ ] 5 个维度滑块正常工作
- [ ] 分数范围 1-5，步长 0.5
- [ ] 分数实时显示在滑块右侧
- [ ] 滑块颜色与维度对应
- [ ] 触摸区域足够大（易操作）

**时间**: 2 天

**文件位置**:
```
src/components/tasting/DimensionRating.vue
```

---

#### 4.4 品鉴记录页面（TastingNotesView）

**任务清单**:
- [ ] 创建 `TastingNotesView.vue`
- [ ] 冲煮完成后自动跳转到此页面
- [ ] 显示本次冲煮的实际参数（只读）
- [ ] 集成 FlavorWheel 组件
- [ ] 集成 DimensionRating 组件
- [ ] 整体评分（StarRating 1-5星）
- [ ] 自定义笔记（textarea）
- [ ] "保存记录" 按钮 → 保存并返回首页

**验收标准**:
- [ ] 自动关联当前冲煮方案
- [ ] 实际参数正确显示
- [ ] 风味轮、维度评分、星级评分正常工作
- [ ] 笔记支持多行输入
- [ ] 点击保存后数据持久化
- [ ] 保存后跳转到历史记录

**时间**: 3 天

**文件位置**:
```
src/views/TastingNotesView.vue
```

---

### 5. 历史记录（History）

#### 5.1 历史记录列表页面（HistoryView）

**任务清单**:
- [ ] 创建 `HistoryView.vue`
- [ ] 显示所有冲煮记录（时间倒序）
- [ ] 每条记录显示：
  - [ ] 方案名称
  - [ ] 冲煮日期时间
  - [ ] 整体评分（星级）
  - [ ] 风味标签（前 3 个）
- [ ] 点击记录查看详情
- [ ] "再来一次" 快速重复冲煮按钮

**验收标准**:
- [ ] 记录按时间倒序排列
- [ ] 显示关键信息（方案、日期、评分、风味）
- [ ] 点击可查看完整记录详情
- [ ] "再来一次" 按钮载入方案并跳转到冲煮配置
- [ ] 空状态提示（无记录时）
- [ ] 支持下拉刷新（可选）

**时间**: 2 天

**文件位置**:
```
src/views/HistoryView.vue
```

---

#### 5.2 记录详情页面（RecordDetail）

**任务清单**:
- [ ] 创建 `RecordDetail.vue` 组件
- [ ] 显示完整冲煮记录：
  - [ ] 方案信息
  - [ ] 实际参数（粉量、水量、水温、总时长）
  - [ ] 风味标签（全部）
  - [ ] 维度评分（雷达图可选）
  - [ ] 整体评分
  - [ ] 自定义笔记
  - [ ] 冲煮日期时间
- [ ] "再来一次" 按钮
- [ ] "编辑" 按钮（可选）
- [ ] "删除" 按钮（需确认）

**验收标准**:
- [ ] 所有信息正确显示
- [ ] 风味标签按颜色分组显示
- [ ] 维度评分可视化（条形图或雷达图）
- [ ] 删除需二次确认
- [ ] 返回按钮可回到历史记录列表

**时间**: 2 天

**文件位置**:
```
src/components/tasting/RecordDetail.vue
```

---

### 6. 路由配置

**任务清单**:
- [ ] 配置完整路由表
- [ ] 设置页面标题（meta.title）
- [ ] 配置 Bottom Sheet 显示规则（meta.showBottomSheet）
- [ ] 设置默认路由（/）
- [ ] 配置 404 页面（可选）

**路由表**:
```javascript
const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/HomeView.vue'),
    meta: { title: '首页', showBottomSheet: true }
  },
  {
    path: '/recipe/:id',
    name: 'RecipeDetail',
    component: () => import('@/components/recipes/RecipeDetail.vue'),
    meta: { title: '方案详情', showBottomSheet: false }
  },
  {
    path: '/brewing',
    name: 'Brewing',
    component: () => import('@/views/BrewingView.vue'),
    meta: { title: '准备冲煮', showBottomSheet: false }
  },
  {
    path: '/tasting/:recordId?',
    name: 'TastingNotes',
    component: () => import('@/views/TastingNotesView.vue'),
    meta: { title: '品鉴记录', showBottomSheet: false }
  },
  {
    path: '/history',
    name: 'History',
    component: () => import('@/views/HistoryView.vue'),
    meta: { title: '历史记录', showBottomSheet: true }
  },
  {
    path: '/record/:id',
    name: 'RecordDetail',
    component: () => import('@/components/tasting/RecordDetail.vue'),
    meta: { title: '记录详情', showBottomSheet: false }
  }
];
```

**验收标准**:
- [ ] 所有路由正常跳转
- [ ] 页面标题正确显示
- [ ] Bottom Sheet 在正确的页面显示/隐藏
- [ ] 浏览器前进/后退正常工作
- [ ] 路由参数正确传递

**时间**: 1 天

**文件位置**:
```
src/router/index.js
```

---

### P0 总验收标准

#### 功能完整性
- [ ] 预设方案库至少包含 3 个方案（V60、Chemex、爱乐压）
- [ ] 计时器精度误差 < 0.1s
- [ ] 每个步骤结束时播放提示音
- [ ] 风味轮包含至少 9 大类、30 种细分风味
- [ ] 历史记录正确保存并可查看
- [ ] 快速重复冲煮功能正常

#### 用户体验
- [ ] 应用启动速度 < 2s
- [ ] 所有触摸区域 ≥ 44x44px
- [ ] 支持竖屏使用，横屏有提示
- [ ] 色彩对比度符合 WCAG AA 标准
- [ ] 无明显卡顿或延迟

#### 数据完整性
- [ ] 冲煮记录正确关联方案
- [ ] 刷新页面后数据不丢失
- [ ] 风味标签正确保存
- [ ] 评分数据正确保存

#### 兼容性
- [ ] iOS Safari 测试通过
- [ ] Android Chrome 测试通过
- [ ] 响应式适配至少 3 种屏幕尺寸

#### 性能
- [ ] Lighthouse Performance Score ≥ 90
- [ ] 首次内容绘制（FCP）< 1.5s
- [ ] 最大内容绘制（LCP）< 2.5s

---

## P1 重要功能（MVP 后优先）

### 🎯 开发目标
增强用户体验，提供个性化功能

**预计工作量**: 2-3 周
**优先级**: 高
**状态**: 🟡 待开始

---

### 1. 自定义冲煮方案

#### 1.1 方案编辑器（RecipeEditor）

**任务清单**:
- [ ] 创建 `RecipeEditor.vue` 组件
- [ ] 基本信息表单（方案名称、器具选择、难度）
- [ ] 参数输入（粉量、水量、水温、研磨度）
- [ ] 分段步骤编辑器：
  - [ ] 添加步骤
  - [ ] 删除步骤
  - [ ] 拖拽排序
  - [ ] 编辑步骤（名称、水量、时长、说明）
- [ ] 粉水比自动计算
- [ ] 保存为自定义方案

**验收标准**:
- [ ] 表单验证（必填项、数值范围）
- [ ] 步骤时间自动累加
- [ ] 粉水比自动计算并更新
- [ ] 拖拽排序流畅
- [ ] 保存后出现在方案列表

**时间**: 4 天

**文件位置**:
```
src/components/recipes/RecipeEditor.vue
```

---

#### 1.2 方案编辑/删除

**任务清单**:
- [ ] 方案详情页添加"编辑"按钮（仅自定义方案）
- [ ] 编辑时预填充现有数据
- [ ] 保存覆盖原方案
- [ ] 方案详情页添加"删除"按钮
- [ ] 删除需二次确认

**验收标准**:
- [ ] 预设方案不显示编辑/删除按钮
- [ ] 编辑时数据正确预填充
- [ ] 删除后方案从列表消失
- [ ] 删除后相关历史记录保留但标记方案已删除

**时间**: 2 天

---

### 2. 咖啡豆库（Coffee Bean Library）

#### 2.1 豆子档案管理（beanStore）

**任务清单**:
- [ ] 创建 `beanStore.js`
- [ ] 定义 CoffeeBean 数据结构（见 PRD 2.4）
- [ ] 实现 Actions：
  - [ ] `createBean(data)` - 创建豆子档案
  - [ ] `updateBean(id, data)` - 更新档案
  - [ ] `deleteBean(id)` - 删除档案
  - [ ] `getAllBeans()` - 获取所有豆子
- [ ] 配置 localStorage 持久化

**验收标准**:
- [ ] 豆子档案包含完整信息（产地、处理法、烘焙度等）
- [ ] 数据持久化到 localStorage
- [ ] 支持关联冲煮记录

**时间**: 2 天

**文件位置**:
```
src/stores/beanStore.js
```

---

#### 2.2 豆子列表和详情页面

**任务清单**:
- [ ] 创建 `BeansView.vue`（豆子列表）
- [ ] 创建 `BeanDetail.vue`（豆子详情）
- [ ] 显示豆子卡片（名称、产地、烘焙度、剩余重量）
- [ ] 豆子详情显示完整信息
- [ ] 显示关联的冲煮记录
- [ ] "新建豆子" 按钮
- [ ] "编辑/删除" 按钮

**验收标准**:
- [ ] 豆子列表按购买日期倒序
- [ ] 剩余重量 < 50g 时标记提醒
- [ ] 烘焙日期超过 30 天时提示新鲜度
- [ ] 关联记录可点击查看

**时间**: 3 天

**文件位置**:
```
src/views/BeansView.vue
src/components/beans/BeanDetail.vue
```

---

#### 2.3 冲煮记录关联豆子

**任务清单**:
- [ ] 品鉴记录页面添加豆子选择器
- [ ] 支持选择已有豆子或快速创建
- [ ] 记录保存时关联豆子 ID
- [ ] 豆子详情页显示使用记录

**验收标准**:
- [ ] 可从下拉列表选择豆子
- [ ] 可快速创建新豆子（简化表单）
- [ ] 关联关系正确保存
- [ ] 豆子详情正确显示使用次数

**时间**: 2 天

---

### 3. 照片上传

#### 3.1 图片压缩和存储

**任务清单**:
- [ ] 集成图片压缩库（browser-image-compression）
- [ ] 实现照片上传功能：
  - [ ] 选择照片（相机/相册）
  - [ ] 压缩到 < 500KB
  - [ ] 转为 Base64 存储或使用 IndexedDB
- [ ] 豆子档案添加照片字段
- [ ] 品鉴记录添加照片字段

**验收标准**:
- [ ] 照片压缩后 < 500KB
- [ ] 压缩不明显影响画质
- [ ] 支持预览和删除
- [ ] 数据存储不超过 5MB（建议限制照片数量）

**时间**: 3 天

**文件位置**:
```
src/utils/imageCompression.js
```

---

### 4. 方案筛选和搜索

**任务清单**:
- [ ] 首页添加搜索框
- [ ] 支持按方案名称搜索
- [ ] 添加筛选器：
  - [ ] 按器具筛选（V60、Chemex、爱乐压等）
  - [ ] 按难度筛选（初级、中级、高级）
  - [ ] 按标签筛选（浅烘焙、果香调等）
- [ ] 筛选结果实时更新

**验收标准**:
- [ ] 搜索支持拼音和模糊匹配
- [ ] 筛选器可多选
- [ ] 筛选条件可清除
- [ ] 无结果时显示提示

**时间**: 2 天

---

### P1 总验收标准

- [ ] 可创建、编辑、删除自定义方案
- [ ] 方案编辑器步骤拖拽流畅
- [ ] 咖啡豆库正常管理（增删改查）
- [ ] 冲煮记录正确关联豆子
- [ ] 照片上传和显示正常
- [ ] 方案搜索和筛选准确

---

## P2 增强功能（后续迭代）

### 🎯 开发目标
为进阶用户提供专业工具和数据分析

**预计工作量**: 2-3 周
**优先级**: 中
**状态**: ⚪ 未计划

---

### 1. 金杯萃取计算器

**任务清单**:
- [ ] 创建 `GoldenCupCalculator.vue`
- [ ] 输入参数：咖啡粉重、咖啡液重、TDS 值
- [ ] 计算萃取率和浓度
- [ ] 在金杯图表上标记当前结果
- [ ] 提供参数优化建议

**验收标准**:
- [ ] 计算结果准确（公式验证）
- [ ] 金杯图表清晰易读
- [ ] 标记点位置准确
- [ ] 建议文案专业且有用

**时间**: 4 天

---

### 2. 数据统计和可视化

**任务清单**:
- [ ] 创建 `StatsView.vue`（统计页面）
- [ ] 显示统计数据：
  - [ ] 本月冲煮次数
  - [ ] 最常用方案（Top 3）
  - [ ] 平均评分趋势（折线图）
  - [ ] 风味偏好分析（雷达图）
  - [ ] 器具使用分布（饼图）
- [ ] 支持时间范围选择（本周、本月、全部）

**验收标准**:
- [ ] 数据计算准确
- [ ] 图表清晰美观
- [ ] 时间范围筛选正常
- [ ] 空数据有提示

**时间**: 5 天

---

### 3. 记录对比功能

**任务清单**:
- [ ] 历史记录页添加"对比"模式
- [ ] 支持选择 2-3 条记录
- [ ] 并排显示对比：
  - [ ] 参数差异（高亮不同）
  - [ ] 风味差异
  - [ ] 维度评分对比（雷达图叠加）
  - [ ] 整体评分对比
- [ ] 导出对比报告（可选）

**验收标准**:
- [ ] 可选择 2-3 条记录对比
- [ ] 差异高亮明显
- [ ] 雷达图叠加清晰
- [ ] 对比结论有参考价值

**时间**: 4 天

---

### 4. 数据导出/导入

**任务清单**:
- [ ] 实现数据导出为 JSON
- [ ] 支持选择导出内容（方案、记录、豆子）
- [ ] 实现数据导入（JSON 文件）
- [ ] 导入前校验数据格式
- [ ] 冲突处理（覆盖/跳过）

**验收标准**:
- [ ] 导出的 JSON 格式正确
- [ ] 导入能还原完整数据
- [ ] 数据校验准确
- [ ] 冲突处理符合预期

**时间**: 3 天

---

### 5. PWA 离线支持

**任务清单**:
- [ ] 配置 PWA manifest.json
- [ ] 添加 Service Worker
- [ ] 缓存核心资源（HTML、CSS、JS）
- [ ] 离线时显示提示
- [ ] 支持添加到主屏幕

**验收标准**:
- [ ] 离线可正常使用核心功能
- [ ] 缓存策略合理（Cache First）
- [ ] 添加到主屏幕正常
- [ ] 图标和启动画面正确显示

**时间**: 2 天

---

### P2 总验收标准

- [ ] 金杯计算器计算准确
- [ ] 数据统计图表清晰
- [ ] 记录对比功能正常
- [ ] 数据导出/导入无误
- [ ] PWA 离线支持正常

---

## 验收报告模板

### 功能验收报告

**项目名称**: 手冲咖啡冲泡助手
**验收阶段**: P0 MVP
**验收日期**: YYYY-MM-DD
**验收人**: ___________

---

#### 1. 功能完整性验收

| 功能模块 | 验收项 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 方案库 | 预设方案数量 | ≥ 3 个 |  | ☐ 通过 ☐ 不通过 |  |
| 方案库 | 方案参数完整性 | 包含所有必需字段 |  | ☐ 通过 ☐ 不通过 |  |
| 计时器 | 计时精度 | 误差 < 0.1s |  | ☐ 通过 ☐ 不通过 |  |
| 计时器 | 步骤自动切换 | 时间到自动切换 |  | ☐ 通过 ☐ 不通过 |  |
| 提醒 | 声音提醒 | 步骤结束播放提示音 |  | ☐ 通过 ☐ 不通过 |  |
| 提醒 | 振动提醒 | 支持设备振动 200-100-200ms |  | ☐ 通过 ☐ 不通过 |  |
| 风味轮 | 类别数量 | ≥ 9 大类 |  | ☐ 通过 ☐ 不通过 |  |
| 风味轮 | 细分数量 | ≥ 30 种 |  | ☐ 通过 ☐ 不通过 |  |
| 风味轮 | 交互流畅性 | 点击响应 < 100ms |  | ☐ 通过 ☐ 不通过 |  |
| 品鉴记录 | 数据保存 | 刷新后不丢失 |  | ☐ 通过 ☐ 不通过 |  |
| 品鉴记录 | 关联方案 | 正确关联 recipeId |  | ☐ 通过 ☐ 不通过 |  |
| 历史记录 | 记录显示 | 按时间倒序 |  | ☐ 通过 ☐ 不通过 |  |
| 历史记录 | 快速重复 | "再来一次"正常载入 |  | ☐ 通过 ☐ 不通过 |  |

---

#### 2. 用户体验验收

| 验收项 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| 启动速度 | < 2s |  | ☐ 通过 ☐ 不通过 |  |
| 触摸区域 | 所有按钮 ≥ 44x44px |  | ☐ 通过 ☐ 不通过 |  |
| 响应式布局 | 竖屏正常显示 |  | ☐ 通过 ☐ 不通过 |  |
| 色彩对比度 | 符合 WCAG AA |  | ☐ 通过 ☐ 不通过 |  |
| 流畅度 | 无明显卡顿 |  | ☐ 通过 ☐ 不通过 |  |

---

#### 3. 兼容性验收

| 平台 | 浏览器 | 版本 | 状态 | 问题描述 |
| :--- | :--- | :--- | :--- | :--- |
| iOS | Safari |  | ☐ 通过 ☐ 不通过 |  |
| Android | Chrome |  | ☐ 通过 ☐ 不通过 |  |
| 桌面 | Chrome |  | ☐ 通过 ☐ 不通过 |  |

**屏幕尺寸测试**:
- [ ] 320px（小屏手机）
- [ ] 375px（iPhone SE）
- [ ] 414px（大屏手机）
- [ ] 768px（平板竖屏）
- [ ] 1024px（平板横屏）

---

#### 4. 性能验收

| 指标 | 预期值 | 实际值 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| Lighthouse Performance | ≥ 90 |  | ☐ 通过 ☐ 不通过 |  |
| First Contentful Paint (FCP) | < 1.5s |  | ☐ 通过 ☐ 不通过 |  |
| Largest Contentful Paint (LCP) | < 2.5s |  | ☐ 通过 ☐ 不通过 |  |
| Total Blocking Time (TBT) | < 300ms |  | ☐ 通过 ☐ 不通过 |  |
| Cumulative Layout Shift (CLS) | < 0.1 |  | ☐ 通过 ☐ 不通过 |  |

---

#### 5. 数据完整性验收

| 验收项 | 预期结果 | 实际结果 | 状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| 记录关联 | 正确关联 recipeId |  | ☐ 通过 ☐ 不通过 |  |
| 数据持久化 | 刷新后不丢失 |  | ☐ 通过 ☐ 不通过 |  |
| 风味标签 | 正确保存和显示 |  | ☐ 通过 ☐ 不通过 |  |
| 评分数据 | 正确保存和显示 |  | ☐ 通过 ☐ 不通过 |  |

---

#### 6. 缺陷清单

| 缺陷 ID | 严重程度 | 模块 | 描述 | 复现步骤 | 状态 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| BUG-001 | 🔴 严重 |  |  |  | ☐ 待修复 ☐ 已修复 |
| BUG-002 | 🟡 中等 |  |  |  | ☐ 待修复 ☐ 已修复 |
| BUG-003 | 🟢 轻微 |  |  |  | ☐ 待修复 ☐ 已修复 |

**严重程度定义**:
- 🔴 严重：影响核心功能，阻塞使用
- 🟡 中等：影响部分功能，有变通方案
- 🟢 轻微：UI/UX 问题，不影响功能

---

#### 7. 验收结论

**总体评价**: ☐ 通过 ☐ 有条件通过 ☐ 不通过

**通过条件**:
- 所有 P0 功能验收项通过
- 无严重缺陷（🔴）
- 中等缺陷（🟡）≤ 3 个

**改进建议**:
1.
2.
3.

**下一步行动**:
- [ ] 修复所有严重缺陷
- [ ] 修复中等缺陷
- [ ] 优化性能指标
- [ ] 进入 P1 功能开发

---

**验收人签名**: ___________
**开发负责人签名**: ___________
**日期**: ___________

---

## 附录

### A. 开发环境要求

**必需**:
- Node.js ≥ 18.0.0
- npm ≥ 9.0.0
- Git ≥ 2.30.0

**推荐**:
- VS Code + Volar 扩展
- Vue DevTools（浏览器插件）
- ESLint + Prettier

---

### B. 代码规范

**命名规范**:
- 组件文件：PascalCase（`FlavorWheel.vue`）
- 普通文件：camelCase（`brewingStore.js`）
- 常量：UPPER_SNAKE_CASE（`FLAVOR_WHEEL_DATA`）
- CSS 类名：kebab-case（`flavor-wheel-container`）

**Git 提交规范**:
```
feat: 添加风味轮组件
fix: 修复计时器精度问题
style: 优化按钮样式
refactor: 重构方案数据结构
docs: 更新 README
test: 添加单元测试
```

---

### C. 性能优化建议

1. **代码分割**: 使用路由懒加载
2. **图片优化**: 压缩、懒加载、WebP 格式
3. **缓存策略**: Service Worker 缓存静态资源
4. **虚拟滚动**: 长列表使用 VueUse `useVirtualList`
5. **防抖节流**: 搜索、滚动事件使用 `useDebounceFn`

---

### D. 测试建议

**单元测试**（可选）:
- 工具函数测试（计算、格式化）
- Store Actions 测试
- 组件逻辑测试

**E2E 测试**（可选）:
- 核心流程：选择方案 → 冲煮 → 记录品鉴
- 边界情况：空数据、错误输入

**手动测试**（必需）:
- 真机测试（iOS + Android）
- 各种屏幕尺寸
- 网络环境（Wi-Fi、4G、离线）

---

**文档状态**: ✅ 完成
**最后更新**: 2026-01-16
**维护者**: Claude
